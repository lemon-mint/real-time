const timeH1=document.getElementById("time"),errorPre=document.getElementById("error"),errordiv=document.getElementById("error-div"),stat=document.getElementById("status");let timeOffset=0,errorString="",DOMTimeOff=(new Date).getTime()-performance.now(),displayTime=(new Date).toLocaleString(),statusText="잠시 기다려주세요, 동기화 중입니다.";function getCurrentTime(){return performance.now()+DOMTimeOff+timeOffset}function updateTime(){const e=getCurrentTime(),t=new Date(e);displayTime=t.toLocaleString(),timeH1.textContent!==displayTime&&(timeH1.textContent=displayTime),errorString?(errordiv.hidden=!1,errorPre.innerText=errorString):errordiv.hidden||(errordiv.hidden=!0),stat.textContent!==statusText&&(stat.textContent=statusText),requestAnimationFrame(updateTime)}function setTimeOffset(e){timeOffset+=e}async function getServerOff(){const e=getCurrentTime(),t=await fetch("/time"),i=getCurrentTime(),n=await t.json();return(n.t1-e+n.t2-i)/2}async function sleep(e){return new Promise((t=>setTimeout(t,e)))}async function syncTime(e=!1){let t=await getServerOff();setTimeOffset(t),statusText="서버와의 시간 차이: "+t.toFixed(3)+"ms",await sleep(1e3),t=await getServerOff(),setTimeOffset(t),statusText="서버와의 시간 차이: "+t.toFixed(3)+"ms",e&&setTimeout(syncTime,3e4)}async function main(){await getServerOff(),await sleep(500),await syncTime(!1),await sleep(500),await syncTime(!0)}requestAnimationFrame(updateTime),main().then();
//# sourceMappingURL=index.c0ebfbf3.js.map
